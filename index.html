<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Grodowa Odyseja</title>
  <link href="https://fonts.googleapis.com/css2?family=MedievalSharp&family=Uncial+Antiqua&display=swap" rel="stylesheet">
  <style>
    body { margin:0; font-family:'MedievalSharp',cursive; background:url('tÅ‚o gry.png') center/cover fixed; color:#f4f1e6; overflow-x:hidden; }
    .screen { display:none; padding:20px; min-height:100vh; box-sizing:border-box; }
    .active { display:block; animation:fadeIn 0.6s ease-out; }
    h1,h2,h3 { text-align:center; font-family:'Uncial Antiqua',cursive; text-shadow:2px 2px 4px rgba(0,0,0,0.6); margin-bottom:20px; }
    .btn { background:linear-gradient(to bottom,#c49e5b,#8b6237); color:#fff9e6; padding:12px 28px; border:none; border-radius:12px; margin:10px; font-size:18px; cursor:pointer; box-shadow:0 4px 10px rgba(0,0,0,0.5); transition:transform 0.2s; }
    .btn:hover { transform:scale(1.05); }
    .download-btn { background:rgba(196,158,91,0.8); display:block; margin:10px auto; }
    .instruction-box { background:rgba(255,248,230,0.2); border:2px solid #8d744a; border-radius:12px; padding:20px; max-width:800px; margin:20px auto; }
    input[type="text"] { width:calc(100% - 22px); padding:10px; font-size:16px; border:none; border-radius:8px; margin:10px 0; box-sizing:border-box; }
    .roles { display:flex; justify-content:center; flex-wrap:wrap; gap:20px; margin:30px 0; }
    .role { text-align:center; cursor:pointer; transition:transform 0.3s; }
    .role:hover { transform:scale(1.05); }
    .role img { width:100px; height:140px; border-radius:50px; border:3px solid transparent; transition:border 0.3s; }
    .role.selected img { border-color:gold; animation:blink 1s infinite; }
    @keyframes blink {0%,100%{opacity:1;}50%{opacity:0.5;}}
    #randomTaskBox { max-width:600px; margin:20px auto; display:flex; flex-wrap:wrap; align-items:center; justify-content:space-between; background:rgba(0,0,0,0.4); padding:15px; border-radius:8px; }
    #randomTask { flex:1 1 auto; margin-right:10px; word-break:break-word; }
    #randomBtn,#completeRandom { background:none; border:none; font-size:20px; cursor:pointer; transition:background 0.3s; }
    #randomBtn { color:#c49e5b; }
    #completeRandom { color:#e3c54a; margin-left:10px; border:2px solid #e3c54a; border-radius:8px; padding:6px 12px; }
    #completeRandom.clicked { background:#e3c54a; color:#333; }
    table#progressTable { width:90%; margin:20px auto; border-collapse:collapse; font-size:14px; }
    #progressTable th,#progressTable td { border:1px solid #8d744a; padding:8px; color:#f4f1e6; text-align:left; }
    #progressTable th { background:rgba(141,116,74,0.5); }
    .council-cards { display:flex; justify-content:center; flex-wrap:wrap; gap:30px; margin:40px 0; }
    .card { width:260px; padding:20px; background:rgba(255,255,255,0.1); border-radius:12px; text-align:center; backdrop-filter:blur(4px); transition:transform 0.3s; }
    .card:hover { transform:scale(1.02); }
    @keyframes fadeIn { from{opacity:0;}to{opacity:1;} }
    /* Overlay Inicjacji */
    #initiationOverlay { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); display:none; align-items:center; justify-content:center; z-index:1000; }
    #initiationContent { background:rgba(0,0,0,0.7); padding:30px; border-radius:12px; text-align:center; color:#f4f1e6; }
    #initiationContent h2 { color:#e3c54a; margin-bottom:10px; }
    #initiationContent img { width:120px; margin:20px auto; display:block; }
    #initContinue { display:none; }
  </style>
</head>
<body>
  <audio id="bgMusic" src="celtic-glory-307625.mp3" loop playsinline preload="auto"></audio>

  <!-- Overlay Inicjacji -->
  <div id="initiationOverlay">
    <div id="initiationContent">
      <h2 id="initTitle">RytuaÅ‚ Inicjacji</h2>
      <p id="initDesc">PrzeciÄ…gnij, aby odsÅ‚oniÄ‡ kartÄ™ z zadaniami...</p>
      <img id="initImg" src="" alt="Inicjacja">
      <button class="btn" id="initContinue">DALEJ</button>
    </div>
  </div>

  <!-- Page 1: Rejestracja druÅ¼yny -->
  <div class="screen active" id="page1">
    <h1>GRODOWA ODYSEJA</h1>
    <img src="logo.1.png" alt="Logo Muzeum" style="width:80px;margin:10px auto;display:block;border:3px solid gold;border-radius:8px;">
    <div class="instruction-box">
      <h2>JAK GRAÄ†?</h2>
      <p>Wpisz nazwÄ™ druÅ¼yny â†’ kliknij â€DALEJâ€</p>
      <p>PRZECZYTAJ HISTORIÄ˜ â†’ kliknij â€DALEJâ€</p>
      <p>WYBIERZ POSTAÄ† â†’ wykonaj rytuaÅ‚</p>
      <p>KLIKNIJ KOSTKÄ˜ â†’ wykonaj zadanie â†’ KLIKNIJ â€ZROBIONEâ€</p>
      <p>OdwiedÅº min. 4 punkty terenowe, wpisujÄ…c sÅ‚owa WIELKIMI LITERAMI.</p>
      <p>Po 4 zadaniach aktywuje siÄ™ â€PRZEJDÅ¹ DO RADYâ€.</p>
    </div>
    <input type="text" id="teamName" placeholder="NAZWA DRUÅ»YNY">
    <button class="btn" id="next1">DALEJ</button>
  </div>

  <!-- Page 2: WstÄ™p fabularny -->
  <div class="screen" id="page2">
    <h2>WSTÄ˜P FABULARNY</h2>
    <div class="instruction-box">
      <p>Rok 972.</p>
      <p>MÃ³wiÄ…, Å¼e to ostatni spokojny rok. Ziemia drÅ¼y â€“ z poÅ‚udnia wieÅ›ci o zwyciÄ™stwie Mieszka I pod CedyniÄ…, ale i o rosnÄ…cym zainteresowaniu imperiÃ³w.</p>
      <p>Ze wschodu nadciÄ…gajÄ… nowe prawa, nowa mowa i srebro od RusÃ³w.</p>
      <p>Z zachodu â€“ krzyÅ¼, ktÃ³ry Mieszko juÅ¼ przyjÄ…Å‚, oddajÄ…c DÄ…brÃ³wkÄ™ za chrzest i pokÃ³j. Ale czy ten pokÃ³j jest trwaÅ‚y?</p>
      <p>Tymczasem Grodzisko Sopockie czuwa â€“ miejsce przesiÄ…kniÄ™te pamiÄ™ciÄ… dawnych czasÃ³w, gdy Å¼elazo byÅ‚o dziedzictwem, a gÅ‚os szeptunek znaczyÅ‚ wiÄ™cej niÅ¼ miecz.</p>
      <p>Åšwiat siÄ™ zmienia. Potrzebujemy nie wojownikÃ³w, lecz straÅ¼nikÃ³w pamiÄ™ci.</p>
      <p>Dlatego was wezwano â€“ cieÅ›li, tkaczy, zielarki, zwiadowcÃ³w. Macie stanÄ…Ä‡ do PrÃ³by Dziedzictwa Å»elaza.</p>
      <p>Odszukacie Å›lady przeszÅ‚oÅ›ci i zdecydujecie:</p>
      <p>czy Grodzisko otworzy bramy na nowe, czy zamknie siÄ™ i trwaÄ‡ bÄ™dzie przy ogniu przodkÃ³w.</p>
    </div>
    <button class="btn" id="next2">DALEJ</button>
  </div>

  <!-- Page 3: WybÃ³r postaci -->
  <div class="screen" id="page3">
    <h2>WYBIERZ POSTAÄ†</h2>
    <div class="roles">
      <div class="role" onclick="startInitiation('Zwiadowca')"><img src="zwiadowca.1.png" alt="Zwiadowca"><p>Zwiadowca</p></div>
      <div class="role" onclick="startInitiation('Tkaczka')"><img src="tkaczka.1.png" alt="Tkaczka"><p>Tkaczka</p></div>
      <div class="role" onclick="startInitiation('Zielarka')"><img src="zielarka.1.png" alt="Zielarka"><p>Zielarka</p></div>
      <div class="role" onclick="startInitiation('Kupiec')"><img src="kupiec.1.png" alt="Kupiec"><p>Kupiec</p></div>
      <div class="role" onclick="startInitiation('RzemieÅ›lnik')"><img src="kowal.1.png" alt="RzemieÅ›lnik"><p>RzemieÅ›lnik</p></div>
    </div>
  </div>

  <!-- Page 4: Interaktywne punkty -->
  <div class="screen" id="page4">
    <h2>INTERAKTYWNE PUNKTY</h2>
    <div id="randomTaskBox">
      <span><strong>ZADANIE LOSOWE:</strong> <span id="randomTask">Kliknij kostkÄ™</span></span>
      <button id="randomBtn">ğŸ²</button>
      <button id="completeRandom">ZROBIONE</button>
    </div>
    <table id="progressTable">
      <tr><th>PUNKT</th><th>STATUS</th></tr>
      <tr><td>Brama Grodziska</td><td id="s1">â€“</td></tr>
      <tr><td>Warsztat Kowala</td><td id="s2">â€“</td></tr>
      <tr><td>Zagroda</td><td id="s3">â€“</td></tr>
      <tr><td>Chata Tkaczki</td><td id="s4">â€“</td></tr>
      <tr><td>Chata Zielarki</td><td id="s5">â€“</td></tr>
      <tr><td>Chata Namiestnika</td><td id="s6">â€“</td></tr>
    </table>
    <div class="instruction-box"><p style="font-weight:bold; text-align:center;">WPISUJ ODPOWIEDZI WIELKIMI LITERAMI.</p></div>
    <button class="btn" id="toCouncil" disabled>PRZEJDÅ¹ DO RADY</button>
  </div>

  <!-- Page 5: Rada Grodu -->
  <div class="screen" id="page5">
    <h2>RADA GRODU</h2>
    <div class="council-cards">
      <div class="card"><h3>Otwarcie na handel</h3><p>OtwÃ³rzcie wrota grodu...</p><button class="btn" onclick="finish('Otwarcie na handel')">WYBIERAM TÄ˜ DROGÄ˜</button></div>
      <div class="card"><h3>ZamkniÄ™cie granic</h3><p>ZacieÅ›nijcie bramy...</p><button class="btn" onclick="finish('ZamkniÄ™cie granic')">WYBIERAM TÄ˜ DROGÄ˜</button></div>
      <div class="card"><h3>Wprowadzenie nowego prawa</h3><p>Spiszcie Å›wieÅ¼e ustawy...</p><button class="btn" onclick="finish('Wprowadzenie nowego prawa')">WYBIERAM TÄ˜ DROGÄ˜</button></div>
    </div>
  </div>

  <!-- Page 6: Podsumowanie -->
  <div class="screen" id="page6">
    <h2>GRATULACJE!</h2>
    <p>DruÅ¼yna: <strong id="outTeam"></strong></p>
    <p>PostaÄ‡: <strong id="outRole"></strong></p>
    <p>Decyzja: <strong id="outDecision"></strong></p>
    <p>Punkty: <strong id="outPoints"></strong></p>
    <div class="instruction-box"><h3>Korona <img src="korona.1.png" style="width:80px;vertical-align:middle;"></h3></div>
    <a href="korona.1.png" download class="btn download-btn">ğŸ“¥ POBIERZ KORONÄ˜</a>
    <div class="instruction-box"><h3>Medalion <img src="medalion.1.png" style="width:80px;vertical-align:middle;"></h3></div>
    <a href="medalion.1.png" download class="btn download-btn">ğŸ“¥ POBIERZ MEDALION</a>
    <button class="btn" onclick="location.reload()">ZAGRAJ PONOWNIE</button>
  </div>

  <script>
    const bgMusic = document.getElementById('bgMusic');
    document.body.addEventListener('click', () => { bgMusic.play().catch(()=>{}); }, { once:true });

    let team='', role='', correctCount=0, doneRandom=false;
    const randomTasks=[
      'Policzcie razem do 10.',
      'StaÅ„cie w rzÄ™dzie...',
      'KaÅ¼dy niech dotknie...',
      'ZrÃ³bcie razem zdjÄ™cie.',
      'StaÅ„cie w ciszy przez 10s.',
      'ZrÃ³bcie klaÅ›niÄ™cie.',
      'PokaÅ¼cie dziwnÄ… minÄ™.',
      'PokaÅ¼ palcem w 4 kierunki.',
      'Zamknijcie oczy na 5s.',
      'ObrÃ³Ä‡cie siÄ™ w miejscu.'
    ];

    function nextPage(n){
      document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
      document.getElementById('page'+n).classList.add('active');
    }

    document.getElementById('next1').onclick = ()=> {
      const name = document.getElementById('teamName').value.trim();
      if(!name) alert('Podaj nazwÄ™ druÅ¼yny');
      else { team=name; nextPage(2); }
    };
    document.getElementById('next2').onclick = ()=> nextPage(3);

    function startInitiation(r){
      role=r;
      document.getElementById('initTitle').innerText=`Inicjacja: ${r}`;
      document.getElementById('initDesc').innerText='PrzeciÄ…gnij, aby odsÅ‚oniÄ‡ kartÄ™ z zadaniami...';
      document.getElementById('initImg').src=`${r.toLowerCase()}.init.png`;
      document.getElementById('initContinue').style.display='none';
      document.getElementById('initiationOverlay').style.display='flex';
    }

    const initImgEl = document.getElementById('initImg');
    let startX=0;
    initImgEl.addEventListener('pointerdown', e=> startX=e.clientX);
    initImgEl.addEventListener('pointerup', e=>{
      if(Math.abs(e.clientX-startX)>50){
        document.getElementById('initDesc').innerText='Rewelacja! Karta odsÅ‚oniÄ™ta.';
        document.getElementById('initContinue').style.display='inline-block';
      }
    });

    document.getElementById('initContinue').onclick = ()=>{
      document.getElementById('initiationOverlay').style.display='none';
      nextPage(4);
    };

    document.getElementById('randomBtn').onclick = ()=>{
      document.getElementById('randomTask').innerText=randomTasks[Math.floor(Math.random()*randomTasks.length)];
    };
    document.getElementById('completeRandom').onclick = ()=>{
      if(!doneRandom){
        doneRandom=true; correctCount++;
        document.getElementById('completeRandom').classList.add('clicked');
        if(correctCount>=4) document.getElementById('toCouncil').disabled=false;
      }
    };
    document.getElementById('toCouncil').onclick = ()=> nextPage(5);

    function finish(dec){
      document.getElementById('outTeam').innerText=team;
      document.getElementById('outRole').innerText=role;
      document.getElementById('outDecision').innerText=dec;
      document.getElementById('outPoints').innerText=correctCount;
      nextPage(6);
    }
  </script>
</body>
</html>
