<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dziedzictwo Żelaza</title>
  <link href="https://fonts.googleapis.com/css2?family=MedievalSharp&display=swap" rel="stylesheet">
  <audio id="bgMusic" src="celtic-festival-307626.mp3" loop autoplay></audio>
  <style>
    body {
      margin: 0;
      font-family: 'MedievalSharp', cursive;
      background: url('tło.png') center center / cover no-repeat fixed;
      background-color: #1d1b16;
      color: #f4f1e6;
    }
    .screen {
      display: none;
      padding: 20px;
      background-color: rgba(35, 32, 28, 0.88);
      min-height: 100vh;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(4px);
      border-radius: 12px;
      margin: 20px;
    }
    .active { display: block; }
    .btn {
      background: linear-gradient(to bottom, #a07d52, #5e4226);
      color: #fff9e6;
      padding: 12px 28px;
      border: none;
      border-radius: 10px;
      margin: 15px auto;
      cursor: pointer;
      font-size: 17px;
      display: inline-block;
      box-shadow: 3px 3px 12px rgba(0, 0, 0, 0.5);
      transition: transform 0.2s;
    }
    .btn:hover {
      transform: scale(1.05);
    }
    h1, h2, p { text-align: center; }
    ul { list-style-type: none; padding: 0; max-width: 700px; margin: 0 auto; }
    li {
      padding: 10px;
      margin: 10px 0;
      border: 2px solid #8d744a;
      border-radius: 8px;
      background: rgba(255, 248, 230, 0.1);
      cursor: pointer;
      color: #f4f1e6;
      transition: background 0.3s;
    }
    li:hover { background: rgba(255, 248, 230, 0.2); }
    img.roleIcon {
      width: 100px;
      border-radius: 50%;
      cursor: pointer;
      transition: transform 0.2s;
    }
    img.roleIcon:hover { transform: scale(1.1); }
    .instruction-box {
      background-color: rgba(255, 248, 230, 0.08);
      border: 2px solid #8d744a;
      border-radius: 12px;
      padding: 20px;
      max-width: 700px;
      margin: 20px auto;
    }
  </style>
</head>
<body>
  <script>
    let selectedRole = null;
    let teamName = '';
    let sideMissionInput = "";
    let sideMissionSubmitted = false;
    let completedTasks = Array(6).fill(false);
    const sideMissions = [
      "Zrób zdjęcie czegoś, co przypomina przeszłość.",
      "Zbierz trzy różne liście i zrób z nich kompozycję.",
      "Narysuj symbol, który kojarzy Ci się z siłą.",
      "Zapisz jedno zdanie, które mogłoby być przysięgą drużyny.",
      "Ułóż krótką rymowankę o Grodzie.",
      "Zrób zdjęcie miejsca, w którym chciałbyś założyć własne grodzisko."
    ];

    const tasks = [
      "Chata Zielarki",
      "Zbrojownia",
      "Chata Garncarza",
      "Kozy",
      "Wiata",
      "Namiestnik"
    ];

    function showScreen(id) {
      document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
      document.getElementById(id).classList.add('active');
    }

    function handleRegister() {
      teamName = document.getElementById("teamName").value.trim();
      if (!teamName) {
        alert("Wpisz nazwę drużyny!");
        return;
      }
      showScreen('fabula');
    }

    function handleRoleSelect(role) {
      selectedRole = role;
      showScreen('sideMission');
    }

    function handleSideMissionSubmit() {
      if (sideMissionInput.trim()) {
        sideMissionSubmitted = true;
        showScreen('taskSelection');
      }
    }

    function handleTaskSubmit(index) {
      completedTasks[index] = true;
      alert(`Zadanie ${tasks[index]} ukończone!`);
      if (completedTasks.filter(Boolean).length >= 4) {
        showScreen('quiz');
      }
    }

    function handleQuizSubmit() {
      showScreen('council');
    }

    function handleFinalDecision(decision) {
      alert(`Twoja decyzja: ${decision}`);
      showScreen('certificate');
    }

    function showCertificate() {
      alert("Certyfikat z zapisanym wyborem!");
    }

  </script>

  <!-- Start screen -->
  <div class="screen active" id="start">
    <h1>Dziedzictwo Żelaza</h1>
    <p>Witamy w grze! Kliknij 'Dalej', aby rozpocząć przygodę.</p>
    <div style="display: flex; justify-content: center; align-items: center; height: 100%; margin-top: 20px;">
      <button class="btn" onclick="showScreen('register')">Dalej</button>
    </div>
  </div>

  <!-- Register screen -->
  <div class="screen" id="register">
    <h2>Rejestracja Drużyny</h2>
    <input type="text" id="teamName" placeholder="Wpisz nazwę drużyny" />
    <button class="btn" onclick="handleRegister()">Zarejestruj drużynę</button>
  </div>

  <!-- Fabula screen -->
  <div class="screen" id="fabula">
    <h2>Fabularne Wprowadzenie</h2>
    <p>
      Rok 972. Grodzisko Sopockie stoi na skraju wielkich zmian… (Wklej pełny tekst fabuły)
    </p>
    <button class="btn" onclick="showScreen('chooseRole')">Dalej</button>
  </div>

  <!-- Choose role -->
  <div class="screen" id="chooseRole">
    <h2>Wybierz swoją postać</h2>
    <div>
      <img class="roleIcon" src="zwiadowca.png" onclick="handleRoleSelect('Zwiadowca')" alt="Zwiadowca">
      <img class="roleIcon" src="tkaczka.png" onclick="handleRoleSelect('Tkaczka')" alt="Tkaczka">
      <img class="roleIcon" src="zielarka.png" onclick="handleRoleSelect('Zielarka')" alt="Zielarka">
      <img class="roleIcon" src="kupiec.png" onclick="handleRoleSelect('Kupiec')" alt="Kupiec">
      <img class="roleIcon" src="rzemieslnik.png" onclick="handleRoleSelect('Rzemieślnik')" alt="Rzemieślnik">
      <img class="roleIcon" src="starszy.png" onclick="handleRoleSelect('Starszy')" alt="Starszy">
    </div>
    <button class="btn" onclick="showScreen('sideMission')">Dalej</button>
  </div>

  <!-- Side Mission -->
  <div class="screen" id="sideMission">
    <h2>Misja Poboczna</h2>
    <p>Wykonaj zadanie poboczne! <em>Przykład: Zrób zdjęcie czegoś, co przypomina przeszłość.</em></p>
    <input type="text" id="sideMissionInput" />
    <button class="btn" onclick="handleSideMissionSubmit()">Zatwierdź</button>
  </div>

  <!-- Task selection -->
  <div class="screen" id="taskSelection">
    <h2>Zadania główne:</h2>
    <div class="task-section">
      <div class="task-card">
        <h3>Chata Zielarki</h3>
        <input type="text" id="task1Input" placeholder="Wpisz słowo rozwiązania" />
        <button class="btn" onclick="handleTaskSubmit(0)">Zatwierdź</button>
      </div>
      <div class="task-card">
        <h3>Zbrojownia</h3>
        <input type="text" id="task2Input" placeholder="Wpisz słowo rozwiązania" />
        <button class="btn" onclick="handleTaskSubmit(1)">Zatwierdź</button>
      </div>
      <div class="task-card">
        <h3>Chata Garncarza</h3>
        <input type="text" id="task3Input" placeholder="Wpisz słowo rozwiązania" />
        <button class="btn" onclick="handleTaskSubmit(2)">Zatwierdź</button>
      </div>
    </div>
    <button class="btn" onclick="showScreen('quiz')">Dalej</button>
  </div>

  <!-- Quiz screen -->
  <div class="screen" id="quiz">
    <h2>Quiz: Wybierz odpowiedź</h2>
    <ul>
      <li onclick="handleQuizSubmit()">Odpowiedź 1</li>
      <li onclick="handleQuizSubmit()">Odpowiedź 2</li>
      <li onclick="handleQuizSubmit()">Odpowiedź 3</li>
    </ul>
    <button class="btn" onclick="showScreen('council')">Dalej</button>
  </div>

  <!-- Council screen -->
  <div class="screen" id="council">
    <h2>Rada Starszych</h2>
    <ul>
      <li onclick="handleFinalDecision('Otwarcie na handel')">Otwarcie na handel</li>
      <li onclick="handleFinalDecision('Adaptacja prawa')">Adaptacja prawa</li>
      <li onclick="handleFinalDecision('Zamknięcie granic')">Zamknięcie granic</li>
    </ul>
  </div>

  <!-- Certificate screen -->
  <div class="screen" id="certificate">
    <h2>Certyfikat</h2>
    <p>Twoja decyzja: <span id="finalDecision"></span></p>
    <button class="btn" onclick="showScreen('start')">Zagraj ponownie</button>
  </div>

</body>
</html>
