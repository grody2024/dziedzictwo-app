<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dziedzictwo Żelaza</title>
  <link href="https://fonts.googleapis.com/css2?family=MedievalSharp&display=swap" rel="stylesheet">
  <audio id="bgMusic" src="celtic-festival-307626.mp3" loop autoplay></audio>
  <style>
    body {
      margin: 0;
      font-family: 'MedievalSharp', cursive;
      background: url('tło.png') center center / cover no-repeat fixed;
      background-color: #1d1b16;
      color: #f4f1e6;
    }

    .screen {
      display: none;
      padding: 20px;
      background-color: rgba(35, 32, 28, 0.88);
      min-height: 100vh;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(4px);
      border-radius: 12px;
      margin: 20px;
      color: #f4f1e6;
    }

    .active {
      display: block;
    }

    .btn {
      background: linear-gradient(to bottom, #a07d52, #5e4226);
      color: #fff9e6;
      padding: 12px 28px;
      border: none;
      border-radius: 10px;
      margin: 15px auto;
      cursor: pointer;
      font-size: 17px;
      display: inline-block;
      box-shadow: 3px 3px 12px rgba(0, 0, 0, 0.5);
      transition: transform 0.2s;
    }

    .btn:hover {
      transform: scale(1.05);
    }

    h1, h2, p {
      text-align: center;
    }

    ul {
      list-style-type: none;
      padding: 0;
      max-width: 700px;
      margin: 0 auto;
    }

    li {
      padding: 10px;
      margin: 10px 0;
      border: 2px solid #8d744a;
      border-radius: 8px;
      background: rgba(255, 248, 230, 0.1);
      cursor: pointer;
      color: #f4f1e6;
      transition: background 0.3s;
    }

    li:hover {
      background: rgba(255, 248, 230, 0.2);
    }

    .correct {
      background-color: #3b763f;
      color: #fff;
    }

    .incorrect {
      background-color: #b03a3a;
      color: #fff;
    }

    img.roleIcon {
      width: 100px;
      border-radius: 50%;
      cursor: pointer;
      transition: transform 0.2s;
    }

    img.roleIcon:hover {
      transform: scale(1.1);
    }

    .glow {
      animation: sparkle 1.5s infinite;
      border: 3px solid gold !important;
      border-radius: 50%;
    }

    .instruction-box {
      background-color: rgba(255, 248, 230, 0.08);
      border: 2px solid #8d744a;
      border-radius: 12px;
      padding: 20px;
      max-width: 700px;
      margin: 20px auto;
    }
  </style>
</head>
<body>
  <script>
    // Game variables
    let selectedRole = null;
    let teamName = '';
    let sideMissionInput = "";
    let sideMissionSubmitted = false;

    // Function to show screens
    function showScreen(id) {
      document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
      document.getElementById(id).classList.add('active');
    }

    // Register team and move to the next screen
    function handleRegister() {
      teamName = document.getElementById("teamName").value.trim();
      if (!teamName) {
        alert("Wpisz nazwę drużyny!");
        return;
      }
      showScreen('fabula'); // przejście do fabuły po rejestracji
    }

    // Handle role selection and move to next screen
    function handleRoleSelect(role) {
      selectedRole = role;
      showScreen('sideMission');
    }

    // Handle side mission submit
    function handleSideMissionSubmit() {
      if (sideMissionInput.trim()) {
        sideMissionSubmitted = true;
        showScreen('taskSelection');
      }
    }

    // Handle task submit
    function handleTaskSubmit(index) {
      alert(`Zadanie ${index + 1} ukończone!`);
      showScreen('taskSelection');
    }

    // Show the final decision screen
    function handleFinalDecision(decision) {
      alert(`Twoja decyzja: ${decision}`);
      showScreen('certificate');
    }

    // Show certificate
    function showCertificate() {
      alert("Certyfikat z zapisanym wyborem!");
    }

  </script>

  <!-- Start screen -->
  <div class="screen active" id="start">
    <h1>Dziedzictwo Żelaza</h1>
    <p>Witamy w grze! Kliknij 'Dalej', aby rozpocząć przygodę.</p>
    <div style="display: flex; justify-content: center; align-items: center; height: 100%; margin-top: 20px;">
      <button class="btn" onclick="showScreen('register')">Dalej</button>
    </div>
  </div>

  <!-- Register screen -->
  <div class="screen" id="register">
    <h2>Rejestracja Drużyny</h2>
    <input type="text" id="teamName" placeholder="Wpisz nazwę drużyny" />
    <button class="btn" onclick="handleRegister()">Zarejestruj drużynę</button>
  </div>

  <!-- Fabula screen -->
  <div class="screen" id="fabula">
    <h2>Fabularne Wprowadzenie</h2>
    <p>
      Rok 972. Grodzisko Sopockie stoi na skraju wielkich zmian… (Wklej pełny tekst fabuły)
    </p>
    <button class="btn" onclick="showScreen('chooseRole')">Dalej</button>
  </div>

  <!-- Choose role -->
  <div class="screen" id="chooseRole">
    <h2>Wybierz swoją postać</h2>
    <div>
      <button class="btn" onclick="handleRoleSelect('Zwiadowca')">Zwiadowca</button>
      <button class="btn" onclick="handleRoleSelect('Tkaczka')">Tkaczka</button>
      <button class="btn" onclick="handleRoleSelect('Zielarka')">Zielarka</button>
      <button class="btn" onclick="handleRoleSelect('Kupiec')">Kupiec</button>
      <button class="btn" onclick="handleRoleSelect('Rzemieślnik')">Rzemieślnik</button>
      <button class="btn" onclick="handleRoleSelect('Starszy')">Starszy</button>
    </div>
  </div>

  <!-- Side Mission -->
  <div class="screen" id="sideMission">
    <h2>Misja Poboczna</h2>
    <p>Wykonaj zadanie poboczne! <em>Przykład: Zrób zdjęcie czegoś, co przypomina przeszłość.</em></p>
    <input type="text" id="sideMissionInput" />
    <button class="btn" onclick="handleSideMissionSubmit()">Zakończ misję poboczną</button>
  </div>

  <!-- Task Selection -->
  <div class="screen" id="taskSelection">
    <h2>Wybierz zadanie</h2>
    <div>
      <label for="task0">Chata Zielarki</label>
      <input type="text" id="task0" />
      <button class="btn" onclick="handleTaskSubmit(0)">Zatwierdź</button>

      <label for="task1">Zbrojownia</label>
      <input type="text" id="task1" />
      <button class="btn" onclick="handleTaskSubmit(1)">Zatwierdź</button>

      <label for="task2">Chata Garncarza</label>
      <input type="text" id="task2" />
      <button class="btn" onclick="handleTaskSubmit(2)">Zatwierdź</button>

      <label for="task3">Kozy</label>
      <input type="text" id="task3" />
      <button class="btn" onclick="handleTaskSubmit(3)">Zatwierdź</button>

      <label for="task4">Wiata</label>
      <input type="text" id="task4" />
      <button class="btn" onclick="handleTaskSubmit(4)">Zatwierdź</button>

      <label for="task5">Namiestnik</label>
      <input type="text" id="task5" />
      <button class="btn" onclick="handleTaskSubmit(5)">Zatwierdź</button>
    </div>
    <button class="btn" onclick="handleCompleteGame()">Przejdź do Rady</button>
  </div>

  <!-- Council screen -->
  <div class="screen" id="council">
    <h2>Wielka Rada</h2>
    <p>Wybierz zakończenie:</p>
    <button class="btn" onclick="handleFinalDecision('Otwarcie na handel')">Otwarcie na handel</button>
    <button class="btn" onclick="handleFinalDecision('Adaptacja prawa')">Adaptacja prawa</button>
    <button class="btn" onclick="handleFinalDecision('Zamknięcie granic')">Zamknięcie granic</button>
  </div>

  <!-- Certificate screen -->
  <div class="screen" id="certificate">
    <h2>Certyfikat</h2>
    <p>Gratulacje! Zakończyłeś grę.</p>
    <p>Drużyna: <span id="certTeamName"></span></p>
    <p>Wybrana misja poboczna: <span id="certMission"></span></p>
    <button class="btn" onclick="window.location.reload()">Zagraj ponownie</button>
  </div>

</body>
</html>
