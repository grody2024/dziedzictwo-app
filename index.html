<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Grodowa Odyseja</title>
  <link href="https://fonts.googleapis.com/css2?family=MedievalSharp&family=Uncial+Antiqua&display=swap" rel="stylesheet">
  <style>
    body { margin:0; font-family:'MedievalSharp', cursive; background:url('tÅ‚o gry.png') center/cover fixed; color:#f4f1e6; overflow-x:hidden; }
    .screen { display:none; padding:20px; min-height:100vh; position:relative; }
    .active { display:block; animation:fadeIn .6s ease-out; }
    h1,h2,h3 { font-family:'Uncial Antiqua', cursive; text-shadow:2px 2px 4px rgba(0,0,0,0.6); }
    .btn { background:linear-gradient(to bottom,#c49e5b,#8b6237); color:#fff9e6; padding:12px 28px; border:none; border-radius:12px; margin:15px 5px; cursor:pointer; font-size:18px; box-shadow:0 4px 10px rgba(0,0,0,0.5); transition:transform .2s; text-decoration:none; display:inline-block; }
    .btn:hover { transform:scale(1.05); }
    .download-btn { background:rgba(196,158,91,0.8); }
    .instruction-box { background:rgba(255,248,230,0.2); border:2px solid #8d744a; border-radius:12px; padding:20px; max-width:800px; margin:20px auto; }
    input[type="text"] { font-size:16px; padding:10px; border:none; border-radius:8px; }
    #introText { background:rgba(0,0,0,0.5); padding:40px; color:#f4f1e6; max-width:800px; margin:20px auto; line-height:1.6; text-align:left; }
    .roles { display:flex; justify-content:center; flex-wrap:wrap; gap:20px; margin:30px 0; }
    .role { text-align:center; cursor:pointer; }
    .role img { width:120px; height:160px; object-fit:cover; border-radius:60px; border:4px solid transparent; transition:border .3s; }
    .role.selected img { border-color:gold; animation:blink 1s infinite; }
    @keyframes blink { 0%,100%{opacity:1;}50%{opacity:0.5;} }
    #randomTaskBox { max-width:600px; margin:20px auto; display:flex; align-items:center; justify-content:space-between; background:rgba(0,0,0,0.4); padding:15px; border-radius:8px; }
    #randomBtn, #completeRandom { background:none; border:none; cursor:pointer; font-size:20px; transition:background .3s; }
    #randomBtn { color:#c49e5b; }
    #completeRandom { color:#e3c54a; margin-left:10px; border:2px solid #e3c54a; border-radius:8px; padding:6px 12px; }
    #completeRandom:hover { background:rgba(227,197,74,0.2); }
    #completeRandom.clicked { background:#e3c54a; color:#333; }
    .tasks { max-width:600px; margin:20px auto; }
    .tasks .task { display:flex; align-items:center; gap:10px; margin:10px 0; }
    .tasks input { flex:1; text-transform:uppercase; }
    #progressPanel { position:fixed; top:20px; right:20px; background:rgba(0,0,0,0.4); padding:10px; border-radius:8px; color:#f4f1e6; }
    #progressTable { margin-top:20px; width:100%; border-collapse:collapse; }
    #progressTable td, #progressTable th { border:1px solid #8d744a; padding:8px; color:#f4f1e6; }
    #progressTable th { background:rgba(141,116,74,0.5); }
    .council-cards { display:flex; justify-content:center; flex-wrap:wrap; gap:30px; margin:40px 0; }
    .card { width:260px; padding:20px; background:rgba(255,255,255,0.1); border-radius:12px; text-align:center; backdrop-filter:blur(4px); }
    #footerLogo { position:absolute; bottom:10px; left:50%; transform:translateX(-50%); width:120px; opacity:0.8; }
    @keyframes fadeIn { from{opacity:0;}to{opacity:1;} }
  </style>
</head>
<body>
  <audio id="bgMusic" src="celtic-glory-307625.mp3" muted autoplay loop preload="auto" controls></audio>

  <!-- 1: Rejestracja druÅ¼yny -->
  <div class="screen active" id="page1">
    <h1>Grodowa Odyseja</h1>
    <div class="instruction-box" id="introText">
      <h2>ğŸ“˜ Jak graÄ‡?</h2>
      <ul>
        <li>Nazwij druÅ¼ynÄ™<br>â¤ Wpisz nazwÄ™ i kliknij â€Dalejâ€</li>
        <li>Poznaj historiÄ™<br>â¤ Przeczytaj opowieÅ›Ä‡ o Grodzie</li>
        <li>Wybierz postaÄ‡<br>â¤ Kliknij postaÄ‡ i â€Dalejâ€</li>
        <li>Zadanie losowe<br>â¤ Kliknij kostkÄ™<br>â¤ Wykonaj zadanie<br>â¤ Kliknij â€ZROBIONEâ€</li>
        <li>Punkty gry (min. 4)<br>â¤ OdwiedÅº miejsca w skansenie<br>â¤ Wpisz sÅ‚owo DUÅ»YMI literami<br>â¤ Kliknij â€ZatwierdÅºâ€</li>
        <li>ğŸ”“ Po wykonaniu 4 punktÃ³w przycisk â€PrzejdÅº do Radyâ€ stanie siÄ™ aktywny.</li>
        <li>âœ¨ ZachÄ™camy do odnalezienia wszystkich 6 punktÃ³w!</li>
        <li>Rada Starszych<br>â¤ Kliknij â€PrzejdÅº do Radyâ€</li>
        <li>ğŸµ Nie wyciszaj telefonu â€“ gra z muzykÄ…</li>
        <li>ğŸ•’ Czas gry: ok. 60 minut</li>
      </ul>
    </div>
    <button class="btn" onclick="nextPage(2)">Dalej</button>
    <img id="footerLogo" src="logo.1.png" alt="Logo Muzeum">
  </div>

  <!-- 2: WstÄ™p fabularny -->
  <div class="screen" id="page2">
    <h2>WstÄ™p fabularny</h2>
    <div id="introText">
      Rok 972 â€“ Czas PrÃ³by<br>
      To moÅ¼e byÄ‡ ostatni spokojny rok.<br>
      WieÅ›ci o zwyciÄ™stwie Mieszka pod CedyniÄ… rozchodzÄ… siÄ™ po ziemiach, a imperia spoglÄ…dajÄ… Å‚akomie.<br>
      Ze wschodu nadciÄ…ga nowe pismo, z zachodu â€“ obca wiara.<br>
      Grodzisko Sopockie trwa â€“ ciche, czujne, pamiÄ™tajÄ…ce przodkÃ³w.<br>
      DziÅ› potrzebujemy straÅ¼nikÃ³w pamiÄ™ci.<br>
      Was â€“ cieÅ›li, tkaczy, zwiadowcÃ³w, zielarek, rzemieÅ›lnikÃ³w i handlarzy.<br>
      W ciÄ…gu godziny odnajdziecie Å›lady przeszÅ‚oÅ›ci i uÅ‚oÅ¼ycie historiÄ™.<br>
      Na koÅ„cu zadecydujecie: otworzyÄ‡ Grodziskoâ€¦ czy zamknÄ…Ä‡ je na sto lat.
    </div>
    <button class="btn" onclick="nextPage(3)">Dalej</button>
    <img id="footerLogo" src="logo.1.png" alt="Logo Muzeum">
  </div>

  <!-- 3: WybÃ³r postaci -->
  <div class="screen" id="page3">
    <h2>Wybierz postaÄ‡</h2>
    <div class="roles">
      <div class="role" onclick="selectRole(this,'Zwiadowca')"><img src="zwiadowca.1.png" alt="Zwiadowca"><p>Zwiadowca</p></div>
      <div class="role" onclick="selectRole(this,'Tkaczka')"><img src="tkaczka.1.png" alt="Tkaczka"><p>Tkaczka</p></div>
      <div class="role" onclick="selectRole(this,'Zielarka')"><img src="zielarka.1.png" alt="Zielarka"><p>Zielarka</p></div>
      <div class="role" onclick="selectRole(this,'Kupiec')"><img src="kupiec.1.png" alt="Kupiec"><p>Kupiec</p></div>
      <div class="role" onclick="selectRole(this,'RzemieÅ›lnik')"><img src="kowal.1.png" alt="RzemieÅ›lnik"><p>RzemieÅ›lnik</p></div>
    </div>
    <button class="btn" id="roleNext" onclick="nextPage(4)" disabled>Dalej</button>
    <img id="footerLogo" src="logo.1.png" alt="Logo Muzeum">
  </div>

  <!-- 4: Interaktywne punkty -->
  <div class="screen" id="page4">
    <h2>Interaktywne punkty gry</h2>
    <div id="randomTaskBox">
      <span><strong>Zadanie losowe:</strong> <span id="randomTask">Kliknij kostkÄ™</span></span>
      <button id="randomBtn">ğŸ²</button>
      <button id="completeRandom" title="Zrobione">ZROBIONE</button>
    </div>
    <div id="progressPanel">
      <table id="progressTable">
        <tr><th>Punkt</th><th>Status</th></tr>
        <tr><td>Brama Grodziska</td><td id="s1">â€“</td></tr>
        <tr><td>Warsztat Kowala</td><td id="s2">â€“</td></tr>
        <tr><td>Zagroda</td><td id="s3">â€“</td></tr>
        <tr><td>Chata Tkaczki</td><td id="s4">â€“</td></tr>
        <tr><td>Chata Zielarki</td><td id="s5">â€“</td></tr>
        <tr><td>Chata Namiestnika</td><td id="s6">â€“</td></tr>
      </table>
    </div>
    <div class="instruction-box">
      <p style="font-weight:bold; text-align:center;">Uwaga: wpisuj odpowiedzi WIELKIMI LITERAMI.</p>
    </div>
    <div class="tasks">
      <div class="task"><label>Brama Grodziska</label><input id="a1" type="text"><button onclick="check(1,'LAMELKA')">ZatwierdÅº</button></div>
      <div class="task"><label>Warsztat Kowala</label><input id="a2" type="text"><button onclick="check(2,'MIECH')">ZatwierdÅº</button></div>
      <div class="task"><label>Zagroda</label><input id="a3" type="text"><button onclick="check(3,'Å»YTO')">ZatwierdÅº</button></div>
      <div class="task"><label>Chata Tkaczki</label><input id="a4" type="text"><button onclick="check(4,'LEN')">ZatwierdÅº</button></div>
      <div class="task"><label>Chata Zielarki</label><input id="a5" type="text"><button onclick="check(5,'POKRZYWA')">ZatwierdÅº</button></div>
      <div class="task"><label>Chata Namiestnika</label><input id="a6" type="text"><button onclick="check(6,'DIRHEMY')">ZatwierdÅº</button></div>
    </div>
    <div class="instruction-box">
      <p style="font-weight:bold; text-align:center;">Aby przejÅ›Ä‡ do sekcji Rady, musisz poprawnie wykonaÄ‡ przynajmniej 4 zadania.</p>
    </div>
    <button class="btn" id="toCouncil" onclick="nextPage(5)" disabled>PrzejdÅº do Rady</button>
    <img id="footerLogo" src="logo.1.png" alt="Logo Muzeum">
  </div>

  <!-- 5: Rada Grodu -->
  <div class="screen" id="page5">
    <h2>Rada Grodu</h2>
    <div class="council-cards">
      <div class="card"><h3>Otwarcie na handel</h3><p>OtwÃ³rzcie wrota grodu dla karawan kupieckich i rozbudujcie targ â€“ zyskajcie bogactwa, egzotyczne dobra i nowe technologie, ale bÄ…dÅºcie czujni na cienie intryg i konkurencjÄ™ dla lokalnych rzemieÅ›lnikÃ³w.</p><button class="btn" onclick="finish('Otwarcie na handel')">Wybieram tÄ™ drogÄ™</button></div>
      <div class="card"><h3>ZamkniÄ™cie granic</h3><p>ZacieÅ›nijcie bramy, wzmocnijcie straÅ¼e i odetnijcie dostÄ™p obcym â€“ chroÅ„cie skarby grodu przed sabotaÅ¼em i kontrabandÄ…, lecz uwaÅ¼ajcie na niedobory surowcÃ³w i politycznÄ… izolacjÄ™.</p><button class="btn" onclick="finish('ZamkniÄ™cie granic')">Wybieram tÄ™ drogÄ™</button></div>
      <div class="card"><h3>Wprowadzenie nowego prawa</h3><p>Spiszcie Å›wieÅ¼e ustawy â€“ regulacje handlu, sÅ‚uÅ¼by wojskowej czy ochrony lasÃ³w. ZrÃ³wnowaÅ¼cie interesy kupcÃ³w, rzemieÅ›lnikÃ³w i zielarek. UwaÅ¼ajcie jednak na korupcjÄ™ i spory interpretacyjne.</p><button class="btn" onclick="finish('Wprowadzenie nowego prawa')">Wybieram tÄ™ drogÄ™</button></div>
    </div>
    <img id="footerLogo" src="logo.1.png" alt="Logo Muzeum">
  </div>

  <!-- 6: Podsumowanie -->
  <div class="screen" id="page6">
    <h2>Podsumowanie</h2>
    <p>DruÅ¼yna: <strong id="outTeam"></strong></p>
    <p>PostaÄ‡: <strong id="outRole"></strong></p>
    <p>Decyzja: <strong id="outDecision"></strong></p>
    <p>Punkty: <strong id="outPoints"></strong></p>
    <div class="instruction-box">
      <h3>Korona WyzwaÅ„ <img src="korona.1.png" alt="Korona WyzwaÅ„" style="width:24px; vertical-align:middle;"></h3>
    </div>
    <p id="bonusText" class="instruction-box" style="margin-top:10px; display:none;">Korona WyzwaÅ„ â€“ za realizacjÄ™ misji pobocznej.</p>
    <a href="medalion.1.png" download class="btn download-btn">ğŸ“¥ Pobierz odznakÄ™</a>
    <img src="medalion.1.png" alt="Medalion" style="max-width:200px; margin:20px; display:block;" />
    <button class="btn" onclick="location.reload()">Zagraj ponownie</button>
    <img id="footerLogo" src="logo.1.png" alt="Logo Muzeum">
  </div>

  <script>
    const bgMusic = document.getElementById('bgMusic');
    window.addEventListener('load', ()=>{ bgMusic.muted = false; bgMusic.play().catch(()=>{}); });
    const randomTasks = [
      'MÄ…droÅ›Ä‡ PrzodkÃ³w â€“ WymyÅ›lcie jedno zdanie, jakby mÃ³wiÅ‚ je starzec z grodu.',
      'KrÄ…g Zgody â€“ StaÅ„cie w kole i dotknijcie siÄ™ dÅ‚oÅ„mi w Å›rodku.',
      'Wilcze Oko â€“ Spojrzyj komuÅ› w oczy przez 5 sekund bez Å›miechu.',
      'Szlak Cieni â€“ ObchodÅºcie wybrane drzewo w ciszy.',
      'PieÅ›Å„ Ziemi â€“ WymyÅ›lcie krÃ³tkie, rytmiczne hasÅ‚o i wypowiedzcie je 3 razy.',
      'Dar PrzodkÃ³w â€“ ZnajdÅºcie coÅ› naturalnego i zÅ‚Ã³Å¼cie to razem w jedno miejsce.',
      'Szept Lasu â€“ KaÅ¼dy powie jedno sÅ‚owo kojarzÄ…ce siÄ™ z dawnymi czasami.',
      'GÅ‚os Rodu â€“ Jeden mÃ³wi "Jestem z Grodu", reszta odpowiada "My z TobÄ…!"'
    ];
    let team = '', role = '', answers = {}, correctCount = 0, doneRandom = false;
    function nextPage(n) {
      if (n === 2) {
        const name = document.getElementById('teamName').value.trim();
        if (!name) { alert('Podaj nazwÄ™ druÅ¼yny'); return; }
        team = name;
      }
      if (n === 4) {
        document.getElementById('randomTask').innerText = 'Kliknij kostkÄ™ aby wylosowaÄ‡ zadanie';
      }
      document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
      document.getElementById('page' + n).classList.add('active');
    }
    document.getElementById('randomBtn').addEventListener('click', () => {
      document.getElementById('randomTask').innerText = randomTasks[Math.floor(Math.random() * randomTasks.length)];
    });
    document.getElementById('completeRandom').addEventListener('click', () => {
      if (!doneRandom) {
        doneRandom = true;
        correctCount++;
        const btn = document.getElementById('completeRandom');
        btn.classList.add('clicked');
        document.getElementById('bonusText').style.display = 'block';
        if (correctCount >= 4) document.getElementById('toCouncil').disabled = false;
      }
    });
    function selectRole(el, r) {
      role = r;
      document.querySelectorAll('.role').forEach(x => x.classList.remove('selected'));
      el.classList.add('selected');
      document.getElementById('roleNext').disabled = false;
    }
    function check(i, code) {
      const val = document.getElementById('a' + i).value.trim().toUpperCase();
      const li = document.getElementById('p' + i);
      if (val === code) {
        if (!answers[i]) correctCount++;
        answers[i] = true;
        li.classList.add('correct');
        li.textContent = li.textContent.split(':')[0] + ': âœ“';
        document.getElementById('s' + i).textContent = 'âœ“';
      } else {
        answers[i] = false;
        li.classList.add('incorrect');
        li.textContent = li.textContent.split(':')[0] + ': âœ—';
        document.getElementById('s' + i).textContent = 'âœ—';
      }
      if (correctCount >= 4) document.getElementById('toCouncil').disabled = false;
    }
    function finish(dec) {
      document.getElementById('outTeam').innerText = team;
      document.getElementById('outRole').innerText = role;
      document.getElementById('outDecision').innerText = dec;
      document.getElementById('outPoints').innerText = correctCount;
      nextPage(6);
    }
  </script>
</body>
</html>
