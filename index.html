<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Grodowa Odyseja</title>
  <link href="https://fonts.googleapis.com/css2?family=MedievalSharp&family=Uncial+Antiqua&display=swap" rel="stylesheet">
  <style>
    /* Podstawowe style */
    body {
      margin: 0;
      font-family: 'MedievalSharp', cursive;
      background: url('tÅ‚o gry.png') center/cover fixed;
      color: #f4f1e6;
      overflow-x: hidden;
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
    }
    .screen {
      display: none;
      padding: 20px;
      min-height: 100vh;
      box-sizing: border-box;
    }
    .active {
      display: block;
      animation: fadeIn 0.8s ease-out;
    }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    h1, h2, h3 {
      text-align: center;
      font-family: 'Uncial Antiqua', cursive;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.6);
      margin-bottom: 16px;
    }
    .btn {
      display: inline-block;
      background: linear-gradient(to bottom, #c49e5b, #8b6237);
      color: #fff9e6;
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      margin: 8px;
      font-size: 18px;
      cursor: pointer;
      transition: transform 0.2s;
    }
    .btn:hover { transform: scale(1.05); }
    input[type=text] {
      width: 100%;
      padding: 12px;
      font-size: 16px;
      border-radius: 6px;
      border: none;
      margin: 8px 0;
      box-sizing: border-box;
    }
    .instruction-box {
      background: rgba(0,0,0,0.5);
      border: 2px solid #8d744a;
      border-radius: 8px;
      padding: 16px;
      max-width: 800px;
      margin: 16px auto;
    }
    .logo {
      display: block;
      width: 80px;
      margin: 12px auto;
      border: 3px solid gold;
      border-radius: 8px;
    }
    .roles {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 16px;
      margin: 24px 0;
    }
    .role {
      text-align: center;
      flex: 0 1 100px;
      cursor: pointer;
    }
    .role img {
      width: 100px;
      height: 140px;
      border-radius: 12px;
      border: 3px solid transparent;
      transition: border 0.3s;
    }
    .role.selected img { border-color: gold; }
    #randomTaskBox {
      display: flex;
      align-items: center;
      background: rgba(0,0,0,0.5);
      padding: 12px;
      border-radius: 8px;
      margin: 20px auto;
      max-width: 600px;
    }
    #randomTask {
      flex: 1;
      margin-right: 12px;
      color: #fff;
      word-break: break-word;
    }
    table {
      width: 90%;
      margin: 16px auto;
      border-collapse: collapse;
      color: #f4f1e6;
    }
    th, td {
      padding: 8px;
      border: 1px solid #8d744a;
    }
    th { background: rgba(141,116,74,0.5); }
  </style>
</head>
<body>
  <audio id="bgMusic" src="celtic-glory-307625.mp3" loop playsinline preload="auto"></audio>

  <!-- Page 1: Rejestracja druÅ¼yny -->
  <div class="screen active" id="page1">
    <h1>GRODOWA ODYSEJA</h1>
    <img src="logo.1.png" alt="Logo Muzeum" class="logo">
    <div class="instruction-box">
      <h2>JAK GRAÄ†?</h2>
      <p>Wpisz nazwÄ™ druÅ¼yny â†’ kliknij DALEJ</p>
      <p>Przeczytaj historiÄ™ â†’ kliknij DALEJ</p>
      <p>Wybierz postaÄ‡ â†’ kliknij postaÄ‡ i DALEJ</p>
      <p>Kostka â†’ zadanie losowe â†’ ZROBIONE</p>
      <p>OdwiedÅº min. 4 punkty terenowe, wpisz sÅ‚owa WIELKIMI LITERAMI</p>
    </div>
    <input type="text" id="teamName" placeholder="Nazwa druÅ¼yny">
    <button class="btn" id="next1">DALEJ</button>
  </div>

  <!-- Page 2: Fabula -->
  <div class="screen" id="page2">
    <h2>WSTÄ˜P FABULARNY</h2>
    <div class="instruction-box">
      <p>Rok 972. MÃ³wiÄ…, Å¼e to ostatni spokojny rok...</p>
      <!-- peÅ‚na treÅ›Ä‡ fabuÅ‚y -->
    </div>
    <button class="btn" id="next2">DALEJ</button>
  </div>

  <!-- Page 3: WybÃ³r postaci -->
  <div class="screen" id="page3">
    <h2>WYBIERZ POSTAÄ†</h2>
    <div class="roles">
      <div class="role" data-role="Zwiadowca"><img src="zwiadowca.1.png"><p>Zwiadowca</p></div>
      <div class="role" data-role="Tkaczka"><img src="tkaczka.1.png"><p>Tkaczka</p></div>
      <div class="role" data-role="Zielarka"><img src="zielarka.1.png"><p>Zielarka</p></div>
      <div class="role" data-role="Kupiec"><img src="kupiec.1.png"><p>Kupiec</p></div>
      <div class="role" data-role="RzemieÅ›lnik"><img src="kowal.1.png"><p>RzemieÅ›lnik</p></div>
    </div>
    <button class="btn" id="next3" disabled>DALEJ</button>
  </div>

  <!-- Page 4: Interaktywne punkty -->
  <div class="screen" id="page4">
    <h2>INTERAKTYWNE PUNKTY</h2>
    <div id="randomTaskBox">
      <span><strong>ZADANIE LOSOWE:</strong> <span id="randomTask">Kliknij kostkÄ™</span></span>
      <button class="btn" id="randomBtn">ðŸŽ²</button>
      <button class="btn" id="completeRandom">ZROBIONE</button>
    </div>
    <table>
      <tr><th>PUNKT</th><th>STATUS</th></tr>
      <tr><td>Brama Grodziska</td><td id="s1">â€“</td></tr>
      <tr><td>Warsztat Kowala</td><td id="s2">â€“</td></tr>
      <tr><td>Zagroda</td><td id="s3">â€“</td></tr>
      <tr><td>Chata Tkaczki</td><td id="s4">â€“</td></tr>
      <tr><td>Chata Zielarki</td><td id="s5">â€“</td></tr>
      <tr><td>Chata Namiestnika</td><td id="s6">â€“</td></tr>
    </table>
    <div class="instruction-box">
      <p style="text-align:center;font-weight:bold;">WPISUJ ODPOWIEDZI WIELKIMI LITERAMI</p>
    </div>
    <button class="btn" id="toCouncil" disabled>PRZEJDÅ¹ DO RADY</button>
  </div>

  <!-- Page 5: Rada Grodu -->
  <div class="screen" id="page5">
    <h2>RADA GRODU</h2>
    <div class="roles council-cards">
      <div class="role"><h3>Otwarcie na handel</h3><button class="btn" data-dec="Otwarcie na handel">WYBIERAM</button></div>
      <div class="role"><h3>ZamkniÄ™cie granic</h3><button class="btn" data-dec="ZamkniÄ™cie granic">WYBIERAM</button></div>
      <div class="role"><h3>Wprowadzenie nowego prawa</h3><button class="btn" data-dec="Wprowadzenie nowego prawa">WYBIERAM</button></div>
    </div>
  </div>

  <!-- Page 6: Podsumowanie -->
  <div class="screen" id="page6">
    <h1>GRATULACJE!</h1>
    <img src="logo.1.png" alt="Logo Muzeum" class="logo">
    <p>DruÅ¼yna: <strong id="outTeam"></strong></p>
    <p>PostaÄ‡: <strong id="outRole"></strong></p>
    <p>Decyzja: <strong id="outDecision"></strong></p>
    <p>Punkty: <strong id="outPoints"></strong></p>
    <a href="korona.1.png" download class="btn download-btn">POBIERZ KORONÄ˜</a>
    <a href="medalion.1.png" download class="btn download-btn">POBIERZ MEDALION</a>
  </div>

  <script>
    // Muzyka w tle
    const bg = document.getElementById('bgMusic');
    document.body.addEventListener('click', () => bg.play().catch(), { once:true });

    let team = '';
    let role = '';
    let points = 0;
    const tasks = [
      'Policzcie razem do 10.',
      'StaÅ„cie w rzÄ™dzie...',
      'KaÅ¼dy niech dotknie...',
      'ZrÃ³bcie razem zdjÄ™cie.',
      'StaÅ„cie w ciszy przez 10s.',
      'ZrÃ³bcie klaÅ›niÄ™cie.',
      'PokaÅ¼cie dziwnÄ… minÄ™.',
      'PokaÅ¼ palcem w 4 kierunki.',
      'Zamknijcie oczy na 5s.',
      'ObrÃ³Ä‡cie siÄ™ w miejscu.'
    ];

    function show(id) {
      document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
      document.getElementById(id).classList.add('active');
    }

    // Page1 -> Page2
    document.getElementById('next1').onclick = () => {
      const name = document.getElementById('teamName').value.trim();
      if (!name) {
        alert('Podaj nazwÄ™ druÅ¼yny');
        return;
      }
      team = name;
      show('page2');
    };

    // Page2 -> Page3
    document.getElementById('next2').onclick = () => show('page3');

    // WybÃ³r postaci
    document.querySelectorAll('#page3 .role').forEach(el => {
      el.onclick = () => {
        document.querySelectorAll('#page3 .role').forEach(r => r.classList.remove('selected'));
        el.classList.add('selected');
        role = el.dataset.role;
        document.getElementById('next3').disabled = false;
      };
    });

    // Page3 -> Page4
    document.getElementById('next3').onclick = () => show('page4');

    // Zadanie losowe
    document.getElementById('randomBtn').onclick = () => {
      const random = tasks[Math.floor(Math.random() * tasks.length)];
      document.getElementById('randomTask').innerText = random;
    };

    document.getElementById('completeRandom').onclick = () => {
      if (points < 4) {
        points++;
        document.getElementById('completeRandom').classList.add('clicked');
        if (points >= 4) {
          document.getElementById('toCouncil').disabled = false;
        }
      }
    };

    // Page4 -> Page5
    document.getElementById('toCouncil').onclick = () => show('page5');

    // Rada Grodu -> Podsumowanie
    document.querySelectorAll('#page5 .btn').forEach(btn => {
      btn.onclick = () => {
        const dec = btn.dataset.dec;
        document.getElementById('outTeam').innerText = team;
        document.getElementById('outRole').innerText = role;
        document.getElementById('outDecision').innerText = dec;
        document.getElementById('outPoints').innerText = points;
        show('page6');
      };
    });
  </script>
</body>
</html>
